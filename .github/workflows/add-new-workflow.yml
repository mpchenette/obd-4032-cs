# GENERATED BY COPILOT

name: Add New GitHub Actions Workflow

permissions: write-all

on:
  workflow_dispatch:

jobs:
  add-workflow:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v2
      with:
        # Fine-grained PAT with contents:write and workflows:write scopes
        token: ${{ secrets.WORKFLOW_TOKEN }}
          
    - name: Create new scheduled workflow file
      run: |
        cat <<EOF > .github/workflows/new-scheduled-workflow.yml
        name: New Scheduled GitHub Actions Workflow

        on:
          schedule:
            - cron: "*/1 * * * *"

        jobs:
          build:
            runs-on: ubuntu-latest

            steps:
            - name: Checkout repository
              uses: actions/checkout@v2

            - name: Run a one-liner script
              run: echo "Hello, world!"
        EOF

    - name: Commit and push new workflow file
      run: |
        git config --global user.name "github-actions[bot]"
        git config --global user.email "github-actions[bot]@users.noreply.github.com"
        git add .
        git commit -m "Add new GitHub Actions workflow file"
        git push
